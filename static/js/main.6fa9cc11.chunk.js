(this.webpackJsonpmusicreact=this.webpackJsonpmusicreact||[]).push([[0],{69:function(e,t,n){},70:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(26),o=n.n(r),i=(n(69),n(12)),c=(n(70),n(7)),l=n(8),h=n(11),u=n(10),d=n(57),b=n(100),j=n(61),m=n(98),p=n(59),O=n(86),g=n(24),k=n(9),f=n(1),x=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).outerDivStyle={position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",zIndex:10},a.innerDivStyle={position:"fixed",background:"white",height:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)",padding:"30px",border:"2px",borderStyle:"solid"},a.escFunction=a.escFunction.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"escFunction",value:function(e){27===e.keyCode&&this.props.hideModal()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this;return this.props.enabled?Object(f.jsx)("div",{style:this.outerDivStyle,onClick:function(t){t.currentTarget===t.target&&e.props.hideModal()},children:Object(f.jsx)("div",{style:this.innerDivStyle,children:this.props.children})}):""}}]),n}(a.Component),v=n(13),y=n(40),C=n.n(y),S=n(64),w=n(54),I=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).errorColor="rgba(255,100,100, 0.6)",e.successColor="rgba(100,255,100, 0.6)",e.style={position:"fixed",width:"100%",height:"60px",lineHeight:"60px",zIndex:50},n.instance=Object(k.a)(e),e.state={message:"",isError:!1},e}return Object(l.a)(n,[{key:"hideMessage",value:function(){clearTimeout(n.timeout),this.setState({message:""})}},{key:"render",value:function(){var e=this;return this.state.message?Object(f.jsx)("div",{onClick:function(){return e.hideMessage()},style:Object(i.a)(Object(i.a)({},this.style),{},{backgroundColor:this.state.isError?this.errorColor:this.successColor}),children:this.state.message}):""}}],[{key:"ShowError",value:function(e){var t=this;clearTimeout(this.timeout),this.instance.setState({message:e,isError:!0}),this.timeout=setTimeout((function(){return t.instance.setState({message:""})}),4e3)}},{key:"ShowMessage",value:function(e){var t=this;clearTimeout(this.timeout),this.instance.setState({message:e,isError:!1}),this.timeout=setTimeout((function(){return t.instance.setState({message:""})}),4e3)}}]),n}(a.Component),M=function e(){Object(c.a)(this,e)},L=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"GetExecute",value:function(){var e=Object(w.a)(C.a.mark((function e(t,n,a,s){var r,o,i,c,l,h,u,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r="/",n)for(r+="?",o=0,i=Object.entries(n);o<i.length;o++)c=Object(S.a)(i[o],2),l=c[0],((h=c[1])||!1===h)&&(r+="".concat(l,"=").concat(h,"&"));return e.next=5,fetch("".concat(this.backendUrl).concat(t).concat(r),{method:"GET",headers:{"content-type":"application/json",Authorization:M.token?"Token ".concat(M.token):""}});case 5:if(u=e.sent,!s.cancel){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,u.json();case 10:if(d=e.sent,!s.cancel){e.next=13;break}return e.abrupt("return");case 13:a(d),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),I.ShowError("Co\u015b posz\u0142o nie tak! GET ".concat(t));case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t,n,a,s){return e.apply(this,arguments)}}()},{key:"Get",value:function(e,t,n){var a={cancel:!1};return this.GetExecute(e,t,n,a),a}},{key:"Post",value:function(){var e=Object(w.a)(C.a.mark((function e(t,n,a){var s,r,o=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.length>3&&void 0!==o[3]?o[3]:null,e.prev=1,e.next=4,fetch("".concat(this.backendUrl).concat(t,"/"),{method:"POST",headers:{"content-type":"application/json",Authorization:M.token?"Token ".concat(M.token):""},body:JSON.stringify(n)});case 4:(r=e.sent).status>=200&&r.status<=299?a(r):null!=s?s(r):I.ShowError("Co\u015b posz\u0142o nie tak! POST ".concat(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),I.ShowError("Co\u015b posz\u0142o nie tak! POST ".concat(t));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"Delete",value:function(e,t){fetch("".concat(this.backendUrl).concat(e),{method:"DELETE",headers:{"content-type":"application/json",Authorization:M.token?"Token ".concat(M.token):""}}).then((function(){return t()})).catch((function(){return I.ShowError("Co\u015b posz\u0142o nie tak! DELETE ".concat(e))}))}},{key:"Put",value:function(e,t,n){fetch("".concat(this.backendUrl).concat(e,"/"),{method:"PUT",headers:{"content-type":"application/json",Authorization:M.token?"Token ".concat(M.token):""},body:JSON.stringify(t)}).then((function(e){if(!(e.status>=200&&e.status<=299))throw new Error("Wrong status");e.json().then((function(e){return n(e)}))})).catch((function(){return I.ShowError("Co\u015b posz\u0142o nie tak! PUT ".concat(e))}))}}]),e}();L.backendUrl="http://127.0.0.1:8000/";var _=L,D=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={genres:[]},a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;_.Get("genres",null,(function(t){return e.setState({genres:t})}))}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={title:this.state.title,performer:this.state.performer,year:this.state.year,genre:this.state.genre};_.Post("song",t,(function(e){return I.ShowMessage("Dodano piosenk\u0119.")}))}},{key:"render",value:function(){return Object(f.jsxs)(m.a,{onSubmit:this.handleSubmit.bind(this),children:[Object(f.jsxs)(m.a.Label,{children:["Tytu\u0142:",Object(f.jsx)(m.a.Control,{name:"title",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["Wykonawca:",Object(f.jsx)(m.a.Control,{name:"performer",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["Rok:",Object(f.jsx)(m.a.Control,{name:"year",type:"number",min:1900,max:2021,onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["Gatunek:",Object(f.jsx)("select",{className:"form-control",name:"genre",value:this.state.genre,onChange:this.handleInputChange,children:this.state.genres.map((function(e){return Object(f.jsx)("option",{value:e,children:e},e)}))})]}),Object(f.jsx)("br",{}),Object(f.jsx)(j.a,{type:"submit",children:"Wy\u015blij"})]})}}]),n}(a.Component),F=n(60),A=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cookies=e.cookies,a.state={albumName:"",isPublic:!1,userId:a.cookies.get("user_id")},a.handleSubmit=a.handleSubmit.bind(Object(k.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={name:this.state.albumName,public:this.state.isPublic,owners:[this.state.userId]};_.Post("album",t,(function(e){return I.ShowMessage("Dodano album.")}))}},{key:"render",value:function(){return Object(f.jsx)("div",{style:{width:"600px"},children:Object(f.jsx)(m.a,{onSubmit:this.handleSubmit,children:Object(f.jsxs)(m.a.Row,{className:"align-items-center",children:[Object(f.jsx)(F.a,{children:Object(f.jsx)(m.a.Control,{onChange:this.handleInputChange,name:"albumName",placeholder:"Nazwa albumu"})}),Object(f.jsx)(F.a,{children:Object(f.jsx)(m.a.Check,{onChange:this.handleInputChange,inline:!0,style:{marginLeft:10},label:"Publiczny",name:"isPublic",checked:this.state.public,id:0})}),Object(f.jsx)(j.a,{type:"submit",children:"Dodaj album"})]})})})}}]),n}(a.Component),P=Object(O.a)(A),T=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cookies=e.cookies,a.state={displayName:"",token:a.cookies.get("token"),user_id:"",showAddSongModal:!1,username:"",password:""},M.token=a.cookies.get("token"),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.token&&_.Get("user_info",null,(function(t){return e.setState({displayName:t.username,user_id:t.id})}))}},{key:"navBarLoggedIn",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)(x,{enabled:this.state.showAddSongModal,hideModal:function(){return e.setState({showAddSongModal:!1})},children:Object(f.jsx)(D,{})}),Object(f.jsx)(x,{enabled:this.state.showAddAlbumModal,hideModal:function(){return e.setState({showAddAlbumModal:!1})},children:Object(f.jsx)(P,{})}),Object(f.jsxs)(d.a,{bg:"dark",variant:"dark",children:[Object(f.jsxs)(b.a,{className:"mr-auto",children:[Object(f.jsx)(b.a.Link,{as:g.b,to:"/songs",children:"Piosenki"}),Object(f.jsx)(b.a.Link,{as:g.b,to:"/albums",children:"Albumy"}),Object(f.jsx)(b.a.Link,{as:g.b,to:"/my_albums",children:"Moje albumy"}),Object(f.jsx)(b.a.Link,{onClick:function(){return e.setState({showAddSongModal:!0,showAddAlbumModal:!1})},children:"Dodaj piosenk\u0119"}),Object(f.jsx)(b.a.Link,{onClick:function(){return e.setState({showAddAlbumModal:!0,showAddSongModal:!1})},children:"Dodaj album"})]}),Object(f.jsx)(b.a.Link,{as:g.b,to:"/user",children:this.state.displayName}),Object(f.jsx)(j.a,{onClick:this.logout.bind(this),variant:"outline-info",children:"Wyloguj"})]})]})}},{key:"navBarLoggedOut",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsxs)(d.a,{bg:"dark",variant:"dark",children:[Object(f.jsxs)(b.a,{className:"mr-auto",children:[Object(f.jsx)(b.a.Link,{as:g.b,to:"/songs",children:"Piosenki"}),Object(f.jsx)(b.a.Link,{as:g.b,to:"/albums",children:"Albumy"})]}),Object(f.jsxs)(m.a,{inline:!0,children:[Object(f.jsx)(p.a,{type:"text",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},placeholder:"Nazwa u\u017cytkownika",className:"mr-sm-2"}),Object(f.jsx)(p.a,{type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},placeholder:"Has\u0142o",className:"mr-sm-2"}),Object(f.jsx)(j.a,{onClick:function(){return e.login(e.state.username,e.state.password)},variant:"outline-success",children:"Zaloguj"})]}),Object(f.jsx)(j.a,{href:"/register",variant:"outline-info",children:"Zarejestruj"})]})})}},{key:"login",value:function(e,t){var n=this,a={username:e,password:t};_.Post("api-token-auth",a,(function(e){return e.json().then((function(e){n.cookies.set("token",e.token),n.cookies.set("user_id",e.user_id),window.location.reload()}))}),(function(){I.ShowError("B\u0142\u0105d logowania"),n.setState({token:"",user_id:"",username:"",password:""})}))}},{key:"logout",value:function(){this.cookies.remove("token"),this.cookies.remove("user_id"),this.setState({token:null,user_id:null,displayName:null},(function(){return window.location.reload()}))}},{key:"render",value:function(){return this.state.displayName?this.navBarLoggedIn():this.navBarLoggedOut()}}]),n}(a.Component),E=Object(O.a)(T),N=(n(79),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password,email:this.state.email,first_name:this.state.name,last_name:this.state.surname};_.Post("user",t,(function(e){return I.ShowMessage("Zarejestrowano u\u017cytkownika.")}))}},{key:"render",value:function(){return Object(f.jsxs)(m.a,{onSubmit:this.handleSubmit.bind(this),children:[Object(f.jsxs)(m.a.Label,{children:["Nazwa u\u017cytkownika:",Object(f.jsx)(m.a.Control,{name:"username",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["Has\u0142o:",Object(f.jsx)(m.a.Control,{name:"password",type:"password",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["Powt\xf3rz has\u0142o:",Object(f.jsx)(m.a.Control,{name:"repeatpassword",type:"password",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["Imi\u0119:",Object(f.jsx)(m.a.Control,{name:"name",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["Nazwisko:",Object(f.jsx)(m.a.Control,{name:"surname",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(m.a.Label,{children:["E-mail:",Object(f.jsx)(m.a.Control,{name:"email",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)("br",{}),Object(f.jsx)(j.a,{type:"submit",children:"Wy\u015blij"})]})}}]),n}(a.Component)),z=n(99),U=n(90),B=n(87),G=n(91),Z=n(92),H=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={favourite:a.props.favourite},a}return Object(l.a)(n,[{key:"setFavourite",value:function(){var e=this;this.props.userId&&(this.state.favourite?_.Delete("favourite_song/".concat(this.state.favourite),(function(){return e.setState({favourite:null})})):_.Post("favourite_song",{author:this.props.userId,song:this.props.songId},(function(t){return t.json().then((function(t){return e.setState({favourite:t.id})}))})))}},{key:"navigateToSongDetail",value:function(e){this.props.history.push("/song/".concat(e))}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)(B.a,{color:this.state.favourite?"red":"black",onClick:this.setFavourite.bind(this)})}),Object(f.jsx)("td",{onClick:function(){return e.navigateToSongDetail(e.props.songId)},children:this.props.songName}),Object(f.jsx)("td",{children:this.props.performer}),Object(f.jsx)("td",{children:this.props.genre}),Object(f.jsx)("td",{children:this.props.year}),Object(f.jsx)("td",{children:this.props.mark}),Object(f.jsx)("td",{children:this.props.commentsCount})]})}}]),n}(a.Component),W=n(88),R=n(89),q=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"getSortButtonVariant",value:function(e){return this.state.sortMode===e?"secondary":"outline-secondary"}},{key:"changeSortMode",value:function(e){var t=this.state.sortMode===e?"":e;this.setState({sortMode:t})}},{key:"renderTableHeader",value:function(t,n,a){var s=this,r=this.state.sortMode===n?e.buttonPressedStyle:e.buttonNotPressedStyle,o=this.state.sortMode===a?e.buttonPressedStyle:e.buttonNotPressedStyle;return Object(f.jsxs)("div",{style:{position:"relative"},children:[t,Object(f.jsx)(j.a,{onClick:function(){return s.changeSortMode(n)},variant:this.getSortButtonVariant(n),style:Object(i.a)(Object(i.a)(Object(i.a)({},e.buttonStyle),e.buttonUpStyle),r),children:Object(f.jsx)(W.a,{size:"20px",style:{margin:"-10px",position:"relative",top:"-8px"}})}),Object(f.jsx)(j.a,{onClick:function(){return s.changeSortMode(a)},variant:this.getSortButtonVariant(a),style:Object(i.a)(Object(i.a)(Object(i.a)({},e.buttonStyle),e.buttonDownStyle),o),children:Object(f.jsx)(R.a,{size:"20px",style:{margin:"-10px",position:"relative",top:"-8px"}})})]})}}]),e}();q.buttonStyle={position:"absolute",right:"-12px",height:"25px"},q.buttonUpStyle={top:"-12px",borderRadius:"5px 5px 0 0"},q.buttonDownStyle={top:"12px",borderRadius:"0 0 5px 5px"},q.buttonPressedStyle={color:"white",borderColor:"rgb(200 200 200)",backgroundColor:"rgb(200 200 200)"},q.buttonNotPressedStyle={color:"rgb(200 200 200)",borderColor:"rgb(200 200 200)",backgroundColor:"white"},q.sortOptions={titleUp:"title",titleDown:"-title",nameUp:"name",nameDown:"-name",songsCountUp:"songs_count",songsCountDown:"-songs_count",performerUp:"performer",performerDown:"-performer",genreUp:"genre",genreDown:"-genre",yearUp:"year",yearDown:"-year",marksUp:"marks_avg",marksDown:"-marks_avg",commentsUp:"comments_count",commentsDown:"-comments_count"};var V=q,J=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cookies=e.cookies,a.cancelFlag=null,a.state={songs:[],offset:0,loadMoreButtonText:"Za\u0142aduj kolejne",canLoadMoreSongs:!0,userId:a.cookies.get("user_id"),sortMode:""},a.fetchData=a.fetchData.bind(Object(k.a)(a)),a.handleFetch=a.handleFetch.bind(Object(k.a)(a)),a.changeSortMode=V.changeSortMode.bind(Object(k.a)(a)),a.getSortButtonVariant=V.getSortButtonVariant.bind(Object(k.a)(a)),a.renderTableHeader=V.renderTableHeader.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0)}},{key:"componentDidUpdate",value:function(e,t,n){e.name===this.props.name&&e.genres===this.props.genres&&e.yearTo===this.props.yearTo&&e.yearSince===this.props.yearSince&&e.markInput===this.props.markInput&&e.markLess===this.props.markLess&&e.markEqual===this.props.markEqual&&e.markMore===this.props.markMore&&e.favourite===this.props.favourite&&t.sortMode===this.state.sortMode||this.setState({offset:0,songs:[],loadMoreButtonText:"Za\u0142aduj kolejne",canLoadMoreSongs:!0},this.fetchData)}},{key:"chooseMarkInput",value:function(){return this.props.markEqual&&this.props.markLess?"lte":this.props.markEqual&&this.props.markMore?"gte":this.props.markEqual?"exact":this.props.markLess?"lt":!!this.props.markMore&&"gt"}},{key:"prepareParams",value:function(){var e={};e.name=this.props.name,e.genres=this.props.genres,e.yearSince=this.props.yearSince,e.yearTo=this.props.yearTo,e.albumId=this.props.albumId,e.user=this.state.userId,e.favourite=this.props.favourite,e.offset=this.state.offset,e.sortMode=this.state.sortMode;var t=this.chooseMarkInput();return t&&(e.mark=this.props.markInput,e.mark_filter=t),e}},{key:"handleFetch",value:function(e){this.cancelFlag=null,this.setState((function(t){return t.songs.length===t.songs.concat(e).length?{loadMoreButtonText:"Za\u0142adowano wszystkie piosenki spe\u0142niaj\u0105ce warunki wyszukiwania",canLoadMoreSongs:!1}:{songs:t.songs.concat(e)}}))}},{key:"fetchData",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0),this.cancelFlag=_.Get("song",this.prepareParams(),this.handleFetch)}},{key:"loadMore",value:function(){this.state.canLoadMoreSongs&&this.setState((function(e,t){return{offset:e.offset+20}}),this.fetchData)}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsxs)(U.a,{striped:!0,bordered:!0,hover:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:Object(f.jsx)(B.a,{})}),Object(f.jsx)("th",{children:this.renderTableHeader("Nazwa",V.sortOptions.titleUp,V.sortOptions.titleDown)}),Object(f.jsx)("th",{children:this.renderTableHeader("Wykonawca",V.sortOptions.performerUp,V.sortOptions.performerDown)}),Object(f.jsx)("th",{children:this.renderTableHeader("Gatunek",V.sortOptions.genreUp,V.sortOptions.genreDown)}),Object(f.jsx)("th",{children:this.renderTableHeader("Rok",V.sortOptions.yearUp,V.sortOptions.yearDown)}),Object(f.jsx)("th",{children:this.renderTableHeader(Object(f.jsx)(G.a,{}),V.sortOptions.marksUp,V.sortOptions.marksDown)}),Object(f.jsx)("th",{children:this.renderTableHeader(Object(f.jsx)(Z.a,{}),V.sortOptions.commentsUp,V.sortOptions.commentsDown)})]})}),Object(f.jsxs)("tbody",{children:[this.state.songs.map((function(t){return Object(f.jsx)(H,{userId:e.state.userId,songId:t.id,songName:t.title,performer:t.performer,genre:t.genre,year:t.year,mark:t.marks_avg?t.marks_avg.toPrecision(2):"-",commentsCount:t.comments_count,favourite:t.favourite,history:e.props.history},t.id)})),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:7,onClick:this.loadMore.bind(this),children:this.state.loadMoreButtonText})})]})]})})}}]),n}(a.Component),Y=Object(O.a)(J),K=n(49),Q=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cancelFlag=null,a.state={genres:[],genresInput:[],nameInput:"",yearSince:1900,yearTo:2021,markInput:5,markLess:!1,markMore:!1,markEqual:!1,favourite:!1,genresText:""},a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a.handleGenreCheckboxChange=a.handleGenreCheckboxChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.cancelFlag=_.Get("genres",null,(function(t){e.setState({genres:t}),e.cancelFlag=null}))}},{key:"componentWillUnmount",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0)}},{key:"handleInputChange",value:function(e){var t,n,a=e.target,s="checkbox"===a.type?a.checked:a.value,r=a.name;"markLess"===r?this.setState((t={},Object(v.a)(t,r,s),Object(v.a)(t,"markMore",!1),t)):"markMore"===r?this.setState((n={},Object(v.a)(n,r,s),Object(v.a)(n,"markLess",!1),n)):this.setState(Object(v.a)({},r,s))}},{key:"handleGenreCheckboxChange",value:function(e){var t=e.target,n=t.checked,a=t.name,s=this.state.genresInput;if(n)s.push(a);else for(var r=0;r<s.length;r++)s[r]===a&&s.splice(r,1);this.setState({genresInput:s},this.createGenresString)}},{key:"createGenresString",value:function(){var e=this.state.genresInput.join(",");this.setState({genresText:e})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)(m.a,{style:{marginBottom:20},children:Object(f.jsxs)(m.a.Row,{className:"align-items-center",children:[Object(f.jsx)(F.a,{md:2,children:Object(f.jsx)(m.a.Control,{onChange:this.handleInputChange,name:"nameInput",placeholder:"Nazwa piosenki lub wykonawcy"})}),Object(f.jsx)(F.a,{md:.5,style:{marginLeft:10,marginRight:30},children:Object(f.jsxs)(z.a,{children:[Object(f.jsx)(z.a.Toggle,{variant:"outline-primary",id:"dropdown-basic",children:"Gatunki"}),Object(f.jsx)(K.a,{style:{margin:"100"},children:this.state.genres.map((function(t){return Object(f.jsx)(m.a.Check,{onChange:e.handleGenreCheckboxChange,name:t,style:{marginLeft:10},label:t,type:"checkbox"},t)}))})]})}),Object(f.jsx)(F.a,{md:.5,children:"Rok od"}),Object(f.jsx)(F.a,{md:.5,children:Object(f.jsx)(m.a.Control,{onChange:this.handleInputChange,name:"yearSince",type:"number",value:this.state.yearSince,min:1900,max:2021})}),Object(f.jsx)(F.a,{md:.5,children:"do"}),Object(f.jsx)(F.a,{md:.5,children:Object(f.jsx)(m.a.Control,{onChange:this.handleInputChange,name:"yearTo",type:"number",value:this.state.yearTo,min:1900,max:2021})}),Object(f.jsx)(F.a,{md:.5,style:{marginLeft:30},children:"Ocena"}),Object(f.jsx)(F.a,{md:.25,children:Object(f.jsx)(m.a.Control,{onChange:this.handleInputChange,name:"markInput",type:"number",value:this.state.markInput,step:.1,min:1,max:5})}),Object(f.jsxs)(F.a,{md:.25,children:[Object(f.jsx)(m.a.Check,{onChange:this.handleInputChange,inline:!0,style:{marginLeft:10},label:"Mniejsza",name:"markLess",checked:this.state.markLess,id:1}),Object(f.jsx)(m.a.Check,{onChange:this.handleInputChange,inline:!0,style:{marginLeft:10},label:"Wi\u0119ksza",name:"markMore",checked:this.state.markMore,id:2}),Object(f.jsx)(m.a.Check,{onChange:this.handleInputChange,inline:!0,style:{marginLeft:10},label:"R\xf3wna",name:"markEqual",checked:this.state.markEqual,id:3})]}),Object(f.jsx)(F.a,{md:.25,children:Object(f.jsx)(m.a.Check,{onChange:this.handleInputChange,inline:!0,style:{marginLeft:20},label:"Ulubione",name:"favourite",checked:this.state.favourite,id:4})})]})}),Object(f.jsx)(Y,{name:this.state.nameInput,genres:this.state.genresText,yearSince:this.state.yearSince,yearTo:this.state.yearTo,markInput:this.state.markInput,markLess:this.state.markLess,markMore:this.state.markMore,markEqual:this.state.markEqual,history:this.props.history,favourite:this.state.favourite})]})}}]),n}(a.Component),X=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).sendComment=a.sendComment.bind(Object(k.a)(a)),a.state={textboxContent:""},a}return Object(l.a)(n,[{key:"sendComment",value:function(e){e.preventDefault();var t={token:this.props.token,song:this.props.songId,album:this.props.albumId,content:this.state.textboxContent};_.Post(this.props.commentAPILink,t,(function(){return window.location.reload()}))}},{key:"handleOnChange",value:function(e){this.setState({textboxContent:e.target.value})}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsxs)(m.a,{style:{textAlign:"left"},onSubmit:this.sendComment,children:[Object(f.jsx)(m.a.Label,{style:{paddingLeft:10},children:"Dodaj komentarz:"}),Object(f.jsx)(m.a.Control,{as:"textarea",rows:5,value:this.state.textboxContent,onChange:this.handleOnChange.bind(this)}),Object(f.jsx)(j.a,{type:"submit",className:"float-right",children:"Dodaj komentarz"})]})})}}]),n}(a.Component),$=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(s.a.Fragment,{children:[Object(f.jsx)("tr",{children:Object(f.jsxs)("td",{align:"left",children:[this.props.username," ",this.props.date]})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{align:"left",children:this.props.text})})]})}}]),n}(a.Component),ee=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cancelFlag=null,a.state={comments:[],offset:0,canLoadMoreComments:!0},a.loadMoreComments=a.loadMoreComments.bind(Object(k.a)(a)),a.handleFetch=a.handleFetch.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0)}},{key:"loadMoreComments",value:function(){this.setState((function(e){return{offset:e.offset+1}}),this.fetchData)}},{key:"handleFetch",value:function(e){this.cancelFlag&&(this.cancelFlag=null),this.setState((function(t){var n=t.comments.length,a=e;a.forEach((function(e){return e.date=new Date(e.create_date)})),a=a.sort((function(e,t){return e.date<t.date?1:e.date>t.date?-1:0}));var s=t.comments.concat(a);return n===s.length?{canLoadMoreComments:!1}:{comments:s}}))}},{key:"fetchData",value:function(){var e={targetId:this.props.targetId,offset:this.state.offset};this.cancelFlag&&(this.cancelFlag.cancel=!0),this.cancelFlag=_.Get(this.props.commentAPILink,e,this.handleFetch)}},{key:"render",value:function(){return Object(f.jsx)("div",{style:{marginTop:60},children:Object(f.jsx)(U.a,{striped:!0,hover:!0,children:Object(f.jsxs)("tbody",{children:[this.state.comments.map((function(e){return Object(f.jsx)($,{username:e.username,text:e.content,date:e.date.toLocaleString()},e.id)})),this.state.canLoadMoreComments?Object(f.jsx)("tr",{children:Object(f.jsx)("td",{onClick:this.loadMoreComments,children:"Za\u0142aduj wi\u0119cej komentarzy"})}):Object(f.jsx)("tr",{children:Object(f.jsx)("td",{onClick:this.loadMoreComments,children:"Za\u0142adowano wszystkie komentarze"})})]})})})}}]),n}(a.Component),te=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cancelFlagMarks=null,a.cancelFlagAuthor=null,a.state={starsColor:["black","black","black","black","black"],mark:5},a.onMouseEnterStar=a.onMouseEnterStar.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t={targetId:this.props.targetId};if(this.cancelFlagMarks&&(this.cancelFlagMarks.cancel=!0),this.cancelFlagMarks=_.Get(this.props.markAPILink,t,(function(t){return e.setState({mark:t.avg?t.avg.toPrecision(2):"Brak ocen"})})),this.props.token){var n={token:this.props.token,targetId:this.props.targetId};this.cancelFlagAuthor&&(this.cancelFlagAuthor=!0),this.cancelFlagAuthor=_.Get(this.props.markAuthorAPILink,n,(function(t){return e.setState({myMark:t?t.mark:"-"},(function(){return e.onMouseEnterStar(t.mark-1)}))}))}}},{key:"componentWillUnmount",value:function(){this.cancelFlagMarks&&(this.cancelFlagMarks.cancel=!0),this.cancelFlagAuthor&&(this.cancelFlagAuthor.cancel=!0)}},{key:"sendMark",value:function(e){var t=this,n={author:this.props.token,song:this.props.targetId,album:this.props.targetId,mark:e};_.Put(this.props.markAuthorAPILink,n,(function(e){return t.setState({myMark:e.mark})}))}},{key:"onMouseEnterStar",value:function(e){for(var t=this.state.starsColor.slice(),n=e;n>=0;n--)t[n]="yellow";for(var a=e+1;a<5;a++)t[a]="black";this.setState({starsColor:t})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("tr",{children:[Object(f.jsxs)("td",{width:250,align:"left",colSpan:1,className:"m-auto",children:["Ocena: ",this.state.mark,Object(f.jsx)("br",{}),"Twoja ocena: ",this.state.myMark]}),this.props.token?Object(f.jsxs)("td",{width:200,align:"left",colSpan:1,onMouseLeave:function(){return e.onMouseEnterStar("number"==typeof e.state.myMark?e.state.myMark-1:-1)},children:[Object(f.jsx)(G.a,{onMouseEnter:function(){return e.onMouseEnterStar(0)},onClick:function(){return e.sendMark(1)},size:35,color:this.state.starsColor[0]}),Object(f.jsx)(G.a,{onMouseEnter:function(){return e.onMouseEnterStar(1)},onClick:function(){return e.sendMark(2)},size:35,color:this.state.starsColor[1]}),Object(f.jsx)(G.a,{onMouseEnter:function(){return e.onMouseEnterStar(2)},onClick:function(){return e.sendMark(3)},size:35,color:this.state.starsColor[2]}),Object(f.jsx)(G.a,{onMouseEnter:function(){return e.onMouseEnterStar(3)},onClick:function(){return e.sendMark(4)},size:35,color:this.state.starsColor[3]}),Object(f.jsx)(G.a,{onMouseEnter:function(){return e.onMouseEnterStar(4)},onClick:function(){return e.sendMark(5)},size:35,color:this.state.starsColor[4]})]}):Object(f.jsx)("td",{children:"Zaloguj si\u0119, \u017ceby oceni\u0107."}),Object(f.jsx)("td",{})]})}}]),n}(a.Component),ne=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cookies=e.cookies,a.state={token:a.cookies.get("token"),songName:"Nazwa piosenki",songPerformer:"Wykonawca",songYear:"2000",songGenre:"Gatunek",userId:a.cookies.get("user_id"),albumId:0},a.submitAddToAlbum=a.submitAddToAlbum.bind(Object(k.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(_.Get("song/".concat(this.props.match.params.id),null,(function(t){return e.setState({songName:t.title,songPerformer:t.performer,songYear:t.year,songGenre:t.genre})})),this.state.token){var t={user:this.state.userId,private:!0,get_all:!0};_.Get("album",t,(function(t){return e.setState({albums:t,albumId:t[0]?t[0].id:0})}))}}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"submitAddToAlbum",value:function(e){e.preventDefault(),_.Put("album/".concat(this.state.albumId),{add_song:this.props.match.params.id},(function(e){return alert(e)}))}},{key:"renderAddToAlbum",value:function(){return Object(f.jsxs)(m.a,{style:{marginBottom:20,marginLeft:8,marginRight:20},onSubmit:this.submitAddToAlbum,children:[Object(f.jsx)(m.a.Row,{style:{paddingLeft:4},children:Object(f.jsx)(m.a.Label,{children:"Nazwa albumu:"})}),Object(f.jsxs)(m.a.Row,{children:[Object(f.jsx)("select",{className:"form-control",style:{width:"25%"},name:"albumId",value:this.state.albumId,onChange:this.handleInputChange,children:this.state.albums.map((function(e,t){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(f.jsx)(j.a,{type:"submit",children:"Dodaj do album"})]})]})}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,children:Object(f.jsxs)("tbody",{children:[Object(f.jsx)("tr",{children:Object(f.jsx)("td",{align:"left",colSpan:5,children:this.state.songName})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{align:"left",colSpan:5,children:this.state.songPerformer})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{align:"left",colSpan:5,children:this.state.songYear})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{align:"left",colSpan:5,children:this.state.songGenre})}),Object(f.jsx)(te,{targetId:this.props.match.params.id,token:this.state.token,markAPILink:"song_mark",markAuthorAPILink:"song_mark_author"})]})}),this.state.albums&&0!==this.state.albums.length?this.renderAddToAlbum():"",this.state.token?Object(f.jsx)(X,{commentAPILink:"song_comment",songId:this.props.match.params.id,token:this.state.token}):"Zaloguj si\u0119, \u017ceby doda\u0107 komentarz",Object(f.jsx)(ee,{commentAPILink:"song_comment",targetId:this.props.match.params.id})]})}}]),n}(a.Component),ae=Object(O.a)(ne),se=n(96),re=n(93),oe=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={favourite:a.props.favourite},a}return Object(l.a)(n,[{key:"setFavourite",value:function(){var e=this;if(this.props.userId)if(this.state.favourite)_.Delete("favourite_album/".concat(this.state.favourite),(function(){return e.setState({favourite:null})}));else{var t={author:this.props.userId,album:this.props.albumId};_.Post("favourite_album",t,(function(t){return t.json().then((function(t){return e.setState({favourite:t.id})}))}))}}},{key:"navigateToAlbumDetail",value:function(e){this.props.history.push("/album/".concat(e))}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)(B.a,{color:this.state.favourite?"red":"black",onClick:this.setFavourite.bind(this)})}),Object(f.jsx)("td",{onClick:function(){return e.navigateToAlbumDetail(e.props.albumId)},children:this.props.albumName}),Object(f.jsx)("td",{children:this.props.songsCount}),Object(f.jsx)("td",{children:this.props.mark}),Object(f.jsx)("td",{children:this.props.commentsCount}),this.props.showModal?Object(f.jsx)("td",{onClick:this.props.showModal,children:Object(f.jsx)(re.a,{})}):null]})}}]),n}(a.Component),ie=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={username:"",errorMessage:""},a.handleSubmit=a.handleSubmit.bind(Object(k.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={username:this.state.username,album:this.props.albumId};_.Post("album_invitation",n,(function(){return t.setState({errorMessage:"",successMessage:"Wys\u0142ano zaproszenie."})}),(function(e){e.json().then((function(e){return t.setState({errorMessage:e,successMessage:""})}))}))}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:"Zapro\u015b do albumu"}),Object(f.jsx)("br",{}),Object(f.jsx)(m.a,{onSubmit:this.handleSubmit,children:Object(f.jsxs)(m.a.Row,{className:"align-items-center",children:[Object(f.jsx)(F.a,{children:Object(f.jsx)(m.a.Control,{onChange:this.handleInputChange,name:"username",placeholder:"Nazwa u\u017cytkownika"})}),Object(f.jsx)(j.a,{type:"submit",children:"Zapro\u015b"})]})}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{style:{color:"red"},children:this.state.errorMessage}),Object(f.jsx)("label",{style:{color:"green"},children:this.state.successMessage})]})}}]),n}(a.Component),ce=n(94),le=n(95),he=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"answerInvitation",value:function(e){_.Post("album_invitation_user",{albumInvitation:this.props.id,accept:e?1:0},(function(){return window.location.reload()}))}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:this.props.albumName}),Object(f.jsx)("td",{children:this.props.songsCount}),Object(f.jsx)("td",{children:this.props.mark}),Object(f.jsx)("td",{children:this.props.commentsCount}),Object(f.jsx)("td",{onClick:function(){return e.answerInvitation(!0)},children:Object(f.jsx)(ce.a,{color:"green"})}),Object(f.jsx)("td",{onClick:function(){return e.answerInvitation(!1)},children:Object(f.jsx)(le.a,{color:"red"})})]})}}]),n}(a.Component),ue=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cookies=e.cookies,a.cancelFlag=null,a.state={userId:a.cookies.get("user_id"),albums:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.cancelFlag&&(this.cancelFlag.cancel=!0),this.cancelFlag=_.Get("album_invitation_user/".concat(this.state.userId),null,(function(t){e.setState({albums:t.results}),e.cancelFlag=null}))}},{key:"componentWillUnmount",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0)}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{style:{textAlign:"left",marginLeft:"15px"},children:"Zaproszenia"}),Object(f.jsxs)(U.a,{striped:!0,bordered:!0,hover:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Nazwa"}),Object(f.jsx)("th",{children:"Piosenki"}),Object(f.jsx)("th",{children:"Ocena"}),Object(f.jsx)("th",{children:"Komentarze"}),Object(f.jsx)("th",{children:Object(f.jsx)(ce.a,{})}),Object(f.jsx)("th",{children:Object(f.jsx)(le.a,{})})]})}),Object(f.jsx)("tbody",{children:this.state.albums.map((function(e){return Object(f.jsx)(he,{id:e.id,albumName:e.album_name,songsCount:e.songs_count,mark:e.marks_avg,commentsCount:e.comments_count,albumId:e.album},e.album)}))})]})]})}}]),n}(a.Component),de=Object(O.a)(ue),be=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cookies=e.cookies,a.cancelFlag=null,a.state={albums:[],page:0,loadMoreButtonText:"Za\u0142aduj kolejne",canLoadMoreAlbums:!0,userId:a.cookies.get("user_id"),showModal:!1,sortMode:""},a.fetchData=a.fetchData.bind(Object(k.a)(a)),a.prepareParams=a.prepareParams.bind(Object(k.a)(a)),a.handleFetch=a.handleFetch.bind(Object(k.a)(a)),a.changeSortMode=V.changeSortMode.bind(Object(k.a)(a)),a.getSortButtonVariant=V.getSortButtonVariant.bind(Object(k.a)(a)),a.renderTableHeader=V.renderTableHeader.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0)}},{key:"componentDidUpdate",value:function(e,t,n){e.name===this.props.name&&e.favourite===this.props.favourite&&e.myAlbums===this.props.myAlbums&&t.sortMode===this.state.sortMode||this.setState({page:0,albums:[],loadMoreButtonText:"Za\u0142aduj kolejne",canLoadMoreAlbums:!0},this.fetchData)}},{key:"prepareParams",value:function(){var e={};return e.name=this.props.name,e.page=this.state.page,e.favourite=this.props.favourite,e.user=this.state.userId,e.private=this.props.myAlbums,e.sortMode=this.state.sortMode,e}},{key:"fetchData",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0),this.cancelFlag=_.Get("album",this.prepareParams(),this.handleFetch)}},{key:"handleFetch",value:function(e){this.cancelFlag=null,this.setState((function(t){return t.albums.length===t.albums.concat(e).length?{loadMoreButtonText:"Za\u0142adowano wszystkie albumy spe\u0142niaj\u0105ce warunki wyszukiwania",canLoadMoreAlbums:!1}:{albums:t.albums.concat(e)}}))}},{key:"loadMore",value:function(){this.state.canLoadMoreAlbums&&this.setState((function(e,t){return{page:e.page+1}}),this.fetchData)}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)(x,{enabled:this.state.showModal,hideModal:function(){return e.setState({showModal:!1})},children:Object(f.jsx)(ie,{albumId:this.state.albumId})}),Object(f.jsxs)(U.a,{striped:!0,bordered:!0,hover:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:Object(f.jsx)(B.a,{})}),Object(f.jsx)("th",{children:this.renderTableHeader("Nazwa",V.sortOptions.nameUp,V.sortOptions.nameDown)}),Object(f.jsx)("th",{children:this.renderTableHeader("Piosenki",V.sortOptions.songsCountUp,V.sortOptions.songsCountDown)}),Object(f.jsx)("th",{children:this.renderTableHeader(Object(f.jsx)(G.a,{}),V.sortOptions.marksUp,V.sortOptions.marksDown)}),Object(f.jsx)("th",{children:this.renderTableHeader(Object(f.jsx)(Z.a,{}),V.sortOptions.commentsUp,V.sortOptions.commentsDown)}),this.props.myAlbums?Object(f.jsx)("th",{children:Object(f.jsx)(se.a,{})}):null]})}),Object(f.jsxs)("tbody",{children:[this.state.albums.map((function(t){return Object(f.jsx)(oe,{albumName:t.name,songsCount:t.songs_count,mark:t.marks_avg,commentsCount:t.comments_count,albumId:t.id,history:e.props.history,favourite:t.favourite,userId:e.state.userId,showModal:e.props.myAlbums?function(){return e.setState({showModal:!0,albumId:t.id})}:null},t.id)})),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:6,onClick:this.loadMore.bind(this),children:this.state.loadMoreButtonText})})]})]}),this.props.myAlbums?Object(f.jsx)(de,{}):""]})}}]),n}(a.Component),je=Object(O.a)(be),me=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={nameInput:"",favourite:!1,public:!1,myAlbums:a.props.myAlbums},a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){e.myAlbums!==this.props.myAlbums&&this.setState({myAlbums:this.props.myAlbums})}},{key:"handleInputChange",value:function(e){this.setState(Object(v.a)({},e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(m.a,{style:{marginBottom:20},children:Object(f.jsxs)(m.a.Row,{className:"align-items-center",children:[Object(f.jsx)(F.a,{md:2,children:Object(f.jsx)(m.a.Control,{onChange:this.handleInputChange,name:"nameInput",placeholder:"Nazwa albumu"})}),Object(f.jsx)(F.a,{md:.25,children:Object(f.jsx)(m.a.Check,{onChange:this.handleInputChange,inline:!0,style:{marginLeft:10},label:"Ulubione",name:"favourite",checked:this.state.favourite,id:0})})]})}),Object(f.jsx)(je,{name:this.state.nameInput,history:this.props.history,favourite:this.state.favourite,myAlbums:this.state.myAlbums})]})}}]),n}(a.Component),pe=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).cookies=e.cookies,a.cancelFlag=null,a.state={token:a.cookies.get("token"),name:"",author:"",mark:"",songs:"",canLoadMoreSongs:!0,comments:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.cancelFlag&&(this.cancelFlag.cancel=!0),this.cancelFlag=_.Get("album/".concat(this.props.match.params.id),null,(function(t){e.cancelFlag=null,e.setState({albumName:t.name})}))}},{key:"componentWillUnmount",value:function(){this.cancelFlag&&(this.cancelFlag.cancel=!0)}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,children:Object(f.jsxs)("tbody",{children:[Object(f.jsx)("tr",{children:Object(f.jsx)("td",{align:"left",colSpan:5,children:this.state.albumName})}),Object(f.jsx)(te,{targetId:this.props.match.params.id,token:this.state.token,markAPILink:"album_mark",markAuthorAPILink:"album_mark_author"})]})}),Object(f.jsx)(Y,{albumId:this.props.match.params.id,history:this.props.history}),this.state.token?Object(f.jsx)(X,{commentAPILink:"album_comment",albumId:this.props.match.params.id,token:this.state.token}):"Zaloguj si\u0119, \u017ceby doda\u0107 komentarz",Object(f.jsx)(ee,{commentAPILink:"album_comment",targetId:this.props.match.params.id})]})}}]),n}(a.Component),Oe=Object(O.a)(pe),ge=n(14),ke=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"B\u0142\u0105d 404"}),Object(f.jsx)("h3",{children:"Nie znaleziono strony"})]})},fe=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.password?(this.props.callbackParam.check_password=this.state.password,this.props.callback(this.props.callbackParam)):I.ShowError("Podaj has\u0142o")}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsxs)(m.a,{onSubmit:this.handleSubmit.bind(this),children:[Object(f.jsxs)(m.a.Label,{children:["Podaj has\u0142o:",Object(f.jsx)(m.a.Control,{name:"password",type:"password",onChange:this.handleInputChange})]}),Object(f.jsx)(j.a,{type:"submit",style:Object(i.a)(Object(i.a)({},this.marginLeft10px),{},{marginBottom:"7px"}),children:"Zmie\u0144"})]})})}}]),n}(a.Component),xe=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).marginLeft10px={marginLeft:"10px"},a.cancelFlag=null,a.state={first_name_placeholder:"",last_name_placeholder:"",email_placeholder:""},a.handleInputChange=a.handleInputChange.bind(Object(k.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.cancelFlag=_.Get("user_info",null,(function(t){e.setState({first_name_placeholder:t.first_name,last_name_placeholder:t.last_name,email_placeholder:t.email}),e.cancelFlag=null}))}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmitPassword",value:function(e){var t=this;if(e.preventDefault(),this.state.newPassword&&this.state.newPassword===this.state.newPasswordConfirm){var n={password:this.state.newPassword};this.setState({passwordCallback:function(e){return _.Put("user_detail",e,(function(e){return t.successCallback("Zmieniono has\u0142o.")}))},showModal:!0,body:n})}else I.ShowError("Has\u0142a r\xf3\u017cni\u0105 si\u0119.")}},{key:"handleSubmitNames",value:function(e){var t=this;e.preventDefault();var n={first_name:this.state.first_name,last_name:this.state.last_name};this.setState({passwordCallback:function(e){return _.Put("user_detail",e,(function(e){return t.successCallback("Zmieniono dane.")}))},showModal:!0,body:n})}},{key:"handleSubmitEmail",value:function(e){var t=this;e.preventDefault();var n={email:this.state.email};this.setState({passwordCallback:function(e){return _.Put("user_detail",e,(function(e){return t.successCallback("Zmieniono adres e-mail.")}))},showModal:!0,body:n})}},{key:"successCallback",value:function(e){I.ShowMessage(e),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{style:{marginTop:"30px"},children:[Object(f.jsx)("h3",{children:"Zmie\u0144 has\u0142o"}),Object(f.jsxs)(m.a,{onSubmit:this.handleSubmitPassword.bind(this),children:[Object(f.jsxs)(m.a.Label,{children:["Nowe has\u0142o:",Object(f.jsx)(m.a.Control,{name:"newPassword",type:"password",onChange:this.handleInputChange})]}),Object(f.jsxs)(m.a.Label,{style:this.marginLeft10px,children:["Powt\xf3rz nowe has\u0142o:",Object(f.jsx)(m.a.Control,{name:"newPasswordConfirm",type:"password",onChange:this.handleInputChange})]}),Object(f.jsx)(j.a,{type:"submit",style:Object(i.a)(Object(i.a)({},this.marginLeft10px),{},{marginBottom:"7px"}),children:"Zmie\u0144"})]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"Zmie\u0144 dane"}),Object(f.jsxs)(m.a,{onSubmit:this.handleSubmitNames.bind(this),children:[Object(f.jsxs)(m.a.Label,{children:["Imi\u0119:",Object(f.jsx)(m.a.Control,{placeholder:this.state.first_name_placeholder,name:"first_name",type:"text",onChange:this.handleInputChange})]}),Object(f.jsxs)(m.a.Label,{style:this.marginLeft10px,children:["Nazwisko:",Object(f.jsx)(m.a.Control,{placeholder:this.state.last_name_placeholder,name:"last_name",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)(j.a,{type:"submit",style:Object(i.a)(Object(i.a)({},this.marginLeft10px),{},{marginBottom:"7px"}),children:"Zmie\u0144"})]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"Zmie\u0144 adres e-mail"}),Object(f.jsxs)(m.a,{onSubmit:this.handleSubmitEmail.bind(this),children:[Object(f.jsxs)(m.a.Label,{children:["E-mail:",Object(f.jsx)(m.a.Control,{placeholder:this.state.email_placeholder,name:"email",type:"text",onChange:this.handleInputChange})]}),Object(f.jsx)(j.a,{type:"submit",style:Object(i.a)(Object(i.a)({},this.marginLeft10px),{},{marginBottom:"7px"}),children:"Zmie\u0144"})]}),Object(f.jsx)(x,{enabled:this.state.showModal,hideModal:function(){return e.setState({showModal:!1})},children:Object(f.jsx)(fe,{callback:this.state.passwordCallback,callbackParam:this.state.body})})]})}}]),n}(a.Component);var ve=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(g.a,{children:[Object(f.jsx)(I,{}),Object(f.jsx)(E,{}),Object(f.jsx)("br",{}),Object(f.jsxs)(ge.c,{children:[Object(f.jsx)(ge.a,{path:"/songs",component:Q}),Object(f.jsx)(ge.a,{path:"/register",component:N}),Object(f.jsx)(ge.a,{path:"/song/:id",component:ae}),Object(f.jsx)(ge.a,{path:"/albums",render:function(e){return Object(f.jsx)(me,Object(i.a)(Object(i.a)({},e),{},{myAlbums:!1}))}}),Object(f.jsx)(ge.a,{path:"/my_albums",render:function(e){return Object(f.jsx)(me,Object(i.a)(Object(i.a)({},e),{},{myAlbums:!0}))}}),Object(f.jsx)(ge.a,{path:"/album/:id",component:Oe}),Object(f.jsx)(ge.a,{path:"/register",component:N}),Object(f.jsx)(ge.a,{path:"/user",component:xe}),Object(f.jsx)(ge.a,{exact:!0,path:"/",component:Q}),Object(f.jsx)(ge.a,{component:ke})]})]})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),r(e),o(e)}))},Ce=n(97);o.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(Ce.a,{children:Object(f.jsx)(ve,{})})}),document.getElementById("root")),ye()}},[[81,1,2]]]);
//# sourceMappingURL=main.6fa9cc11.chunk.js.map